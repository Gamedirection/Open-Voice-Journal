<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Open-Voice-Journal</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <main class="app-shell">
      <header class="hero">
        <div class="hero-row">
          <div>
            <h1>Open-Voice-Journal</h1>
            <p>Basic test app for web and Android APK validation.</p>
            <p id="projectVersion" class="hint">Version: loading...</p>
          </div>
          <nav class="tab-bar">
            <button class="tab-button is-active" type="button" data-tab="record">Record</button>
            <button class="tab-button" type="button" data-tab="recordings">Recordings</button>
            <button class="tab-button" type="button" data-tab="settings">Settings</button>
          </nav>
        </div>
      </header>

      <section id="tab-record" class="tab-panel is-active">
        <div class="record-panel">
          <article class="card record-card">
            <h2>Record</h2>
            <input id="recordingTitle" placeholder="Enter recording title" value="Phone test memo" />
            <div class="visualizer">
              <canvas id="recordVisualizer" width="640" height="120"></canvas>
            </div>
            <div class="record-controls">
              <button id="recordStart" class="record-button" type="button" aria-label="Start recording"></button>
              <button id="recordStop" class="stop-button" type="button" disabled>Stop</button>
            </div>
            <button id="micEnable" class="ghost-button" type="button">Enable Microphone</button>
            <p id="recordStatus">Ready to record.</p>
            <audio id="recordPlayback" controls></audio>
            <div class="button-row">
              <button id="recordDownload" type="button" disabled>Download Recording</button>
            </div>
            <p id="uploadStatus" class="hint">Uploads enabled by default.</p>
            <p class="hint">Microphone permission required on first use.</p>
          </article>
          <article class="card upload-card">
            <h2>Manual Upload</h2>
            <input id="manualTitle" placeholder="Upload title (optional)" />
            <input id="manualFile" type="file" accept="audio/*" />
            <div class="button-row">
              <button id="manualUpload" type="button">Upload File</button>
            </div>
            <p id="manualStatus" class="hint">Select an audio file to upload.</p>
          </article>
        </div>
      </section>

      <section id="tab-recordings" class="tab-panel">
        <article class="card">
          <div class="card-header">
            <h2>All Recordings</h2>
            <div class="recordings-header-actions">
              <div class="recordings-legend">
                <span class="badge badge-cloud">&#x2601;&#xFE0F; Cloud</span>
                <span class="badge badge-local">&#x1F3E0; Local</span>
              </div>
              <button id="refreshRecordings" type="button">Refresh</button>
            </div>
          </div>
          <div id="recordingsList" class="recordings-list">No recordings yet.</div>
        </article>
      </section>

      <section id="tab-settings" class="tab-panel">
        <section class="card-grid">
          <article class="card">
            <h2>Appearance</h2>
            <button id="themeToggle" class="toggle-button" type="button">Dark mode: Off</button>
          </article>

          <article class="card">
            <h2>Recording Upload</h2>
            <label class="toggle-row">
              <input id="uploadToggle" type="checkbox" />
              <span>Upload recordings automatically</span>
            </label>
            <p class="hint">Turn this off to keep recordings local only.</p>
          </article>

          <article class="card">
            <h2>Automation & AI</h2>
            <label class="toggle-row">
              <input id="autoTranscribeToggle" type="checkbox" />
              <span>Auto transcribe after upload</span>
            </label>
            <label class="toggle-row">
              <input id="autoSummarizeToggle" type="checkbox" />
              <span>Auto summarize after transcription</span>
            </label>
            <input id="summaryProvider" placeholder="Summary provider (default: ollama_local)" />
            <input id="summaryModel" placeholder="Summary model (default: qwen2.5:7b-instruct)" />
            <input id="summaryApiKey" type="password" placeholder="Summary API key (optional)" />
            <textarea id="summaryPrompt" rows="6" placeholder="Summary prompt template"></textarea>
            <p class="hint">Default summary prompt:</p>
            <pre id="summaryPromptDefault" class="hint prompt-default"></pre>
            <div class="button-row">
              <button id="saveAiSettings" type="button">Save AI Settings</button>
              <button id="resetAiSettings" type="button">Restore Defaults</button>
            </div>
            <p id="aiSettingsStatus" class="hint">Default provider: local Ollama.</p>
          </article>

          <article class="card">
            <h2>API Connections</h2>
            <input id="apiBaseInput" placeholder="http://192.168.1.100:8080" />
            <button id="saveApiBase" type="button">Save API URL</button>
            <div class="button-row">
              <button id="useEmulator" type="button">Use Emulator 10.0.2.2</button>
              <button id="useLocalhost" type="button">Use Localhost</button>
              <button id="usePrompt" type="button">Set Custom URL</button>
            </div>
            <p id="apiBaseLabel">Using auto API URL.</p>
            <p id="apiStatus">Checking...</p>
            <button id="refreshHealth" type="button">Refresh</button>
          </article>

          <article class="card">
            <h2>API Tools</h2>
            <input id="recordingId" placeholder="Paste recording ID" />
            <button id="createRecording" type="button">Create Test Recording</button>
            <button id="queueTranscription" type="button">Queue Job</button>
            <p id="recordingResult">No recording created yet.</p>
            <p id="jobResult">No job queued yet.</p>
          </article>

          <article class="card">
            <h2>Server Backup</h2>
            <button id="createBackup" type="button">Backup Server Now</button>
            <p id="backupStatus" class="hint">Create a backup before deleting or restoring data.</p>
            <div id="backupList" class="recordings-list">No backups yet.</div>
          </article>

          <article class="card">
            <h2>Credits</h2>
            <p>
              Alex Sierputowski @
              <a href="https://gamedirection.net" target="_blank" rel="noopener noreferrer">GameDirection.net</a>
            </p>
            <p>
              Contact:
              <a href="https://join.gamedirection.net" target="_blank" rel="noopener noreferrer">join.gamedirection.net</a>
            </p>
          </article>

          <article class="card">
            <h2>Documentation</h2>
            <p><a id="docsSwaggerLink" href="#" target="_blank" rel="noopener noreferrer">API Swagger</a></p>
            <p><a id="docsOpenApiLink" href="#" target="_blank" rel="noopener noreferrer">OpenAPI JSON</a></p>
            <p><a href="https://github.com/Gamedirection/Open-Voice-Journal/blob/main/README.md" target="_blank" rel="noopener noreferrer">README</a></p>
            <p><a href="https://github.com/Gamedirection/Open-Voice-Journal" target="_blank" rel="noopener noreferrer">GitHub Repository</a></p>
            <p id="docsVersion" class="hint">Version: loading...</p>
          </article>
        </section>
      </section>
    </main>

    <script src="script.js"></script>
  </body>
</html>
